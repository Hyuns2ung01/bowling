<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ³ ê´€ë¦¬ì ë¡œê·¸ì¸</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <div class="section" style="margin-top: 50px; text-align: center;">
            <h2>ğŸ” ê´€ë¦¬ì ë¡œê·¸ì¸</h2>
            <p style="color: #666; margin-bottom: 20px;">ê¸°ë¡ ìˆ˜ì • ë° ì‚­ì œ ê¶Œí•œì´ ë¶€ì—¬ë©ë‹ˆë‹¤.</p>
            <div class="input-group">
                <label>ë¹„ë°€ë²ˆí˜¸</label>
                <input type="password" id="adminPassword" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
            </div>
            <button onclick="login()">ë¡œê·¸ì¸</button>
            <p id="errorMsg" style="color: #e74c3c; margin-top: 15px; font-size: 0.9rem; display: none;"></p>

            <a href="/"
                style="display: block; margin-top: 20px; color: #999; text-decoration: none; font-size: 0.85rem;">í™ˆìœ¼ë¡œ
                ëŒì•„ê°€ê¸°</a>
        </div>
    </div>

    <script>
        async function login() {
            const password = document.getElementById('adminPassword').value;
            const errorMsg = document.getElementById('errorMsg');

            if (!password) {
                errorMsg.innerText = "ì‘ ì•ˆë¼, ëŒì•„ê°€ ã…‹";
                errorMsg.style.display = "block";
                return;
            }

            try {
                const res = await fetch('/api/admin/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ password })
                });

                if (res.ok) {
                    alert("ë¡œê·¸ì¸ ì„±ê³µ!");
                    location.href = "/history";
                } else {
                    const data = await res.json();
                    errorMsg.innerText = data.message || "ë¡œê·¸ì¸ ì‹¤íŒ¨";
                    errorMsg.style.display = "block";
                }
            } catch (e) {
                errorMsg.innerText = "ì„œë²„ ì—°ê²° ì˜¤ë¥˜";
                errorMsg.style.display = "block";
            }
        }
    </script>
</body>

</html>